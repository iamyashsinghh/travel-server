generator client {
  provider = "prisma-client-js"
  seed = "node prisma/seed.js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admin {
  id          Int          @id @default(autoincrement())
  email       String       @unique(map: "Admin_email_key")
  password    String
  name        String
  role        String       @default("admin")
  created_at    DateTime        @default(now()) @db.Timestamp(0)
  updated_at    DateTime        @default(now()) @db.Timestamp(0)

  // Define relation: One Admin â†’ Many Permissions
  permissions permission[] @relation("AdminPermissions")
}

model permission {
  id      Int    @id @default(autoincrement())
  name    String
  adminId Int

  // Define foreign key relation
  admin   admin @relation(fields: [adminId], references: [id], name: "AdminPermissions")

  @@index([adminId], map: "Permission_adminId_fkey")
}

model otps {
  id         Int      @id @default(autoincrement()) @db.UnsignedInt
  user_id    String      @db.VarChar(255)
  code       String   @db.VarChar(10)
  type       otp_type @default(user)
  expires_at DateTime @db.DateTime(0)
  created_at DateTime @default(now()) @db.Timestamp(0)
}


model users {
  id               Int             @id @default(autoincrement()) @db.UnsignedInt
  name             String?
  username         String?         @unique(map: "users_username_unique") @db.VarChar(25)
  map_type         String?
  email            String?         @unique(map: "users_email_unique") @db.VarChar(150)
  mobile           String          @unique(map: "users_mobile_unique") @db.VarChar(14)
  ride_otp         Int?
  gender           String?
  profile_picture  String?
  active           Boolean         @default(true)
  email_confirmed  Boolean         @default(false)
  mobile_confirmed Boolean         @default(false)
  fcm_token        String?
  expo_token       String?
  refferal_code    String?
  referred_by      Int?            @db.UnsignedInt
  current_lat      Float?
  current_lng      Float?
  rating_total     Float           @default(0.00)
  no_of_ratings    Int             @default(0)
  login_by         users_login_by?
  last_known_ip    String?         @db.VarChar(45)
  last_login_at    DateTime?       @db.Timestamp(0)
  created_at       DateTime        @default(now()) @db.Timestamp(0)
  updated_at       DateTime        @default(now()) @db.Timestamp(0)
  deleted_at       DateTime?       @db.Timestamp(0)
}

enum users_login_by {
  android
  ios
}

enum otp_type {
  user
  driver
}
